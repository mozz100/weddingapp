<div class="container guest_rsvp_form">
  <h3><%= I18n.t('guests.hello', :name => @guest.fname) %></h3>
  <%= form_for @guest, :url => guests_update_path(@guest.rsvp_code), :html => {:class=>"cheese"} do |f| %>

    <p class="question"><%= t 'guests.are_you_coming' %></p>
    <% [ ['guests.coming',+1], ['guests.not_coming',-1] ].each do |x| %>
      <%= label_tag "status#{x[1]}", :class=> "radio" do %>
          <%= radio_button_tag 'guest[status]', x[1], @guest.status == x[1], :id => "status#{x[1]}" %>
          <%= t x[0] %>
      <% end %>
    <% end %>

    <% @custom_questions.each do |q| %>
      <p class="question" id="question_<%= q[:key] %>"><%= q[:question_text] %></p>
      <% q[:options].each_pair do |optslug, desc| %>
        <%= label_tag "#{q[:key]}_#{optslug}", :class=> "radio #{q[:key]}" do %>
            <%= radio_button_tag "data[#{q[:key]}]", optslug, @guest.data[q[:key]] == optslug, :id => "#{q[:key]}_#{optslug}" %>
            <%= desc %>
        <% end %>
      <% end %>

    <% end %>


    <p class="question"><%= t 'guests.notes' %></p>
    <%= text_area_tag 'data[notes]', @guest.data[:notes], :rows => 3, :cols => 80 %>

    <p><%= f.submit t("guests.submit", :name => @guest.fname), :class=>"btn" %></p>

  <% end %>
</div>
